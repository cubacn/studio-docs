:sourcesdir: ../../../../../source

[[data_stores]]
==== 管理数据存储

主数据存储属性::
+
--
*Main Data Store Properties* 窗口展示主数据存储的配置。
可以通过以下方式打开该窗口：

* 在 CUBA 项目树双击 *Project* -> *Data Stores* -> *Main Data Store*。
* 从主菜单点击： *CUBA* -> *Main Data Store Settings...*。

可以在 *Database type* 字段选择数据库服务类型。下面的字段可以修改数据库的 URL 并指定用户名、密码和其他可选的连接参数。

连接参数的格式依赖于所选的 DBMS。连接字符串应当包含一个分隔符，用来分隔数据库名称和参数。
比如，设置一个 Microsoft SQL Server 2008+ 实例名时，可以使用下面的字符串：

[source]
----
;instanceName=myinstance
----

如果选中了 *Custom database URL* 复选框，则可以指定自定义的数据库连接 URL。
此时需要提供 *Host* 和 *Database* 的名称，因为在 `build.gradle` 里面是分开使用的。

如果是 HSQLDB 的话，Studio 自己会提供数据库服务并且将数据库文件存储在 `build/hsqldb` 目录。
--

附加数据存储::
--

如需在项目中创建 {main_man_url}//data_store.html[附加数据存储]，在 CUBA 项目树右键点击 *Data Stores*，选择 *New* -> *Additional Data Store*。
项目中注册的附加数据存储作为 *Data Stores* 部分的子项展示：

image::features/project/additional-stores.png[align="center"]

右键单击附加数据存储，会弹出右键菜单：

* *Delete Data Store* - 从项目中移除该附加数据存储
* *Edit Data Store* - 打开对话框编辑附加数据存储设置
* *Generate Model...* - 从选中的附加数据存储<<generate_model,生成数据模型>>

创建或编辑附加数据存储时，会显示 *Data Store* 对话框，其带有以下字段：

* *Data store name* - 数据存储的名称。只能包含字母和下划线，并且不能与项目名称相同。
* *Data store type* - 数据存储的类型：`RdbmsStore` 或 `Custom`，参阅 {main_man_url}//data_store.html[文档] 了解细节。下面两个字段是在选择 `RdbmsStore` 时需要设置。
* *DataSource JNDI name* - Studio 基于数据存储的名称自动设置。
* *Database type*、*URL* 等 - 数据库连接参数。

image::features/project/add-store-settings.png[align="center"]

--
